+++
title = "📝マーケットメイク"
lastmod = 2022-09-19T09:08:52+09:00
tags = ["WIKI"]
draft = false
+++

-   up: [🔖投資手法]({{< relref "20220716193728.md" >}})
-   refs.
    -   [📝mmbot]({{< relref "20220716164647.md" >}})
    -   [📝高頻度取引]({{< relref "20220916104417.md" >}})
-   links
    -   [マーケットメイク - Wikipedia](https://ja.wikipedia.org/wiki/%E3%83%9E%E3%83%BC%E3%82%B1%E3%83%83%E3%83%88%E3%83%A1%E3%82%A4%E3%82%AF)


## マーケットメイクとは {#9b535b}

マーケット・メイキング・アルゴリズム. market making. マーケットメイクという単語は和製英語のようで, 英語では market makingだったりmarket makerで検索するのがいい.

売り気配(ask)と買い気配(bid)に指値を供給し, 約定した際の売買差額を利益とする戦略.

指値注文の指値は, 買値(bid)を買い(buy), 売値(ask)で売る(sell)ことに注意. 視点は取引所となり, トレーダーの成行注文を誘い込む.


### マーケットメイカー {#f9501c}

マーケットメイクをするトレーダー. マーケットメイカーは高い売値で売って低い買値で買うということを何度も繰り返すことでそのスプレッドを裁定利益とすることができる.

市場の[流動性]({{< relref "20220918092153.md#ef5f3e01-b5eb-4ad6-80dd-faefc1d4ddd7" >}})を生み出すために, 取引所はマーケットメイカーの存在を歓迎している.


### マーケットメイクの収入源はスプレッド収益 {#c44933}

[スプレッド(spread)]({{< relref "20220918092153.md#279b7a6c-f628-4b41-8ea8-764502efe786" >}})収益がマーケットメイク戦略の収入源.

ref. <https://www.investopedia.com/terms/b/bid-askspread.asp>

> Market makers, many of which may be employed by brokerages, offer to sell securities at a given price (the ask price) and will also bid to purchase securities at a given price (the bid price). When an investor initiates a trade they will accept one of these two prices depending on whether they wish to buy the security (ask price) or sell the security (bid price).


## 📝マーケット・メイキング・アルゴリズム {#e4dd477c-8553-4d2c-8e61-224b22ba8e34}

[📝トレードアルゴリズム]({{< relref "20220716193728.md" >}})のなかで特にマーケットメイクに関わるもの.


### 市場仲値参照 {#bc0991}

[市場仲値]({{< relref "20220918092153.md#d22e321c-5e72-4453-95da-a31a7d3b193d" >}})を参照して, その前後に自分の定めたspread分のmarginを取って指値をいれ続ける戦略.

[スプレッド(Bid-Ask Spread)]({{< relref "20220918092153.md#279b7a6c-f628-4b41-8ea8-764502efe786" >}})が大きいときは, その分marginを広く取ると収益もおおきくなく.

[ボラティリティ]({{< relref "20220714213106.md#26eecaa5-45f1-4539-8cff-2cee3cf1cd4a" >}})が大きすぎる場合は十分にスプレッドを広くしておかないと, 不利な指値になってしまい損失がでるので, 状況に応じてスプレッド幅を調整する.

基本的には約定したら再び指値を入れることを繰り返す戦略だが, トレンド偏りによって片方向のみポジションが残ってしまうので改善は必要.


### リベート獲得 {#b54a2e}

[リベート]({{< relref "20220716193437.md#6d81361c-5233-4691-84a3-5e7f26ed2637" >}})が存在する場合は片側約定したらもう片方の指値を約定価格に指し直す戦略がある. この場合売買による[スプレッド損益]({{< relref "20220716193437.md#fd94ee1b-7344-482c-b088-319ab2cfcae6" >}})は得られないが代わりに[リベート損益]({{< relref "20220716193437.md#6d81361c-5233-4691-84a3-5e7f26ed2637" >}})を得ることが出来る.


### 自己ポジション参照 {#b725e7}

売買のどちらがの約定によるポジションを持った場合は, 反対の売買が約定しやすいように指値を指す. トレンドによるポジションリスクの解消が目的.

ずらす幅は固定値でもいいし, 板の厚みを元にパラメータ調整してもいい.


### 市場実勢価格連動 {#408fbd60-f813-4138-a1a4-d9a26a239dc9}

仲値に対してトレンドを加味した重みを考慮してspreadを指す.

単純に仲値に指し続けていても, トレンドがあるとネットワーク遅延もあり一定時間の遅れが生じて, 実体の仲値とはズレてしまうので, 仲値を予測して先回りして指す方法.


### 市場流動性活用 {#a46b85cc-5013-4e26-810f-bc2c9411a3df}

市場の流動性を活用する戦略で, 別名ペニージャンプ (Penny Jump)と呼ばれる.

板情報を分析して仲値を市場仲値からずらす戦略. Pennyがなんなのかわからないが, [市場実勢価格連動](#408fbd60-f813-4138-a1a4-d9a26a239dc9)がトレンドジャンプだとするとこちらは大口注文ジャンプ.

[最良価格]({{< relref "20220918092153.md#4ea430bf-b0e3-47e3-85d7-51f6e2f888b7" >}})に大きな注文量が指値で現れたら, 自分の指値をそれより1tickのみよくして指値をいれる(板の内側にいれるということ)で, 大口注文のついでに自分の指値を買ってもらうという戦略.

これは収益機会を増やす目的があるが, 片ポジションが残るために在庫処理(損切)も必要になる.


## マーケットメイクTopics {#390c2f}

-   [典型的なHFT業者は要するにマーケットメイクをしている]({{< relref "20220916104417.md#816aca98-c0e8-46a3-af59-2f80e94d67f9" >}})


### 在庫管理とマーケットメイク {#fae136}

マーケットメイクは指値をいれ続けるものの, ポジションの偏りが生じて在庫処分をするのが一つの難しいところ.

そこでポジションを持ったらそれを閉じるということを[テイク注文]({{< relref "20220918092649.md#060bc040-8346-40c8-a590-90fbaa85198a" >}})(成行/[即時執行可能指値注文]({{< relref "20220918092649.md#27fdef45-d11e-4c4f-a2ef-adffc743c34f" >}}))を利用してそのつど調整する方法がシンプルで足がかりとしては実装しやすい.


### 💡マーケットメイクと逆選択リスク {#cf7b1353-ca17-4ae5-b344-918785aa81ce}

逆選択, 逆選抜とは経済学の用語だが, マーケットメイクの文脈ではポジションがトレンドにつられて損失を被るリスクのこと.

> <https://twitter.com/JapaneseMl/status/1394072446848978946>
>
> 高頻度mmbot簡単に儲かると思う人はとりあえず作って最初lotで放ってみるのが一番だと思います。きれいな直線を描いて資産が減ります。これが手数料と逆選択です。

<!--quoteend-->

> マーケット・メイクは、板に指値注文を置きますが、買いの指値注文を置くという行為は、「価格がその水準まで下がってきて約定することを期待（予測）し、かつ、その後、価格が同水準以上に高くなることを期待（予測）する」ということです。これは逆張りのトレードなわけですが、その期待や予測に反して価格が反発せず、約定した状態でそのまま一方方向に動いて行ってしまう、というのが「逆選択をしてしまう」ということです

ref. [アルファ探求「平均回帰」編｜Hoheto (仮想通貨botter)｜note](https://note.com/hht/n/neb66fd3c945a)


## 🔗References {#3b90d2}


### 📄High-frequency trading in a limit order book - Avellaneda and Stoikov [2008] {#339e5f47-79bc-449e-be08-97a0b145568c}

<https://www.math.nyu.edu/~avellane/HighFrequencyTrading.pdf>

おそらく[UKI]({{< relref "20220712161715.md#84fc275c-5877-4ce2-9e27-b5eda59c3812" >}})さんのブログ記事で紹介されたからか, [📝mmbot]({{< relref "20220716164647.md" >}})開発で大変よく言及されている. つよつよbotterはみんな読んでるはず.

[マーケットメイク戦略の理論 - これからの「お金」の話をしよう](https://we.love-profit.com/entry/2018/02/12/113916)

-   refs.
    -   [📄執行戦略と取引コストに関する研究の進展 - 杉原慶彦]({{< relref "20220716193728.md#2b011271-d8b2-416d-90b4-7db9373be42e" >}})
        -   第４章で解説.
-   links.
    -   [◆指値板における最適提示価格を求めよう ～高頻度取引における在庫モデル～◆ - Qiita](https://qiita.com/kanawoinvest/items/3d7d69be6458b60fa688?utm_campaign=popular_items&utm_medium=feed&utm_source=popular_items#32-q%E3%81%A7%E6%BC%B8%E8%BF%91%E5%B1%95%E9%96%8B%E3%81%99%E3%82%8B)
    -   [仮想通貨の自動取引入門 `Pubnubによるマーケット・メイキング` | by Yuya Sugano | Medium](https://yuyasugano.medium.com/%E4%BB%AE%E6%83%B3%E9%80%9A%E8%B2%A8%E3%81%AE%E8%87%AA%E5%8B%95%E5%8F%96%E5%BC%95%E5%85%A5%E9%96%80-pubnub%E3%81%AB%E3%82%88%E3%82%8B%E3%83%9E%E3%83%BC%E3%82%B1%E3%83%83%E3%83%88-%E3%83%A1%E3%82%A4%E3%82%AD%E3%83%B3%E3%82%B0-df403abbe944)
-   impls.
    -   <https://github.com/fedecaccia/avellaneda-stoikov>
    -   <https://github.com/ragoragino/avellaneda-stoikov>
    -   <https://github.com/mdibo/Avellaneda-Stoikov>
