+++
title = "📝Clojure高速化"
tags = ["WIKI"]
draft = false
+++

[📂Clojure開発]({{< relref "20220211141917.md" >}})

Clojureの性能最適化や高速化についてのトピックまとめ.


## Clojure: 型ヒント(Type Hinting) {#26eed20d-611d-46c4-bd37-d60c2f20a1d7}

-   [Clojure - Java Interop](https://clojure.org/reference/java_interop#typehints)

Clojureは動的型付け言語だが動的型付け言語のJavaの上に構築されているため, 暗黙的な型はリフレクションによって型推論されている.

そのため型hintを設定することで型推論の効率化をすることができ, コンパイルや実行速度の最適化をすることができるかもしれない.

Clojureでは, **^** という記号を Record/Type/Protocol/Java Classに設定して 変数を宣言することで型ヒントを実現する.

---

ref: [[Clojure] 型を指定すると速い | Basic Werk](http://basicwerk.com/blog/archives/1479)

Clojureは型ヒントを使ってコンパイラを助けることで, パフォーマンスの重要なコード領域に対してリフレクションを避けることができる.

ClojureはローカルコンテキストにおけるJavaの基本型を使った高速な計算や算術演算をサポートする. すべてのJava基本型（int, float, long, double, boolean, char, short, byte）がサポートされている。


## プリミティブ無検査演算 {#8b866c}

Clojureは無検査演算が使える. **unchecked-add**. 型ヒントでも十分高速化できるが, unchecked-addをつかうともう少しだけ算術演算は高速化できる.
