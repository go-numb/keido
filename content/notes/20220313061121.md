+++
title = "📝Clojure Date/Time/Timestamp"
lastmod = 2022-08-16T06:52:45+09:00
tags = ["WIKI"]
draft = false
+++

-   up: [📂Clojure Core Languages]({{< relref "20220112142936.md" >}})
-   tags: [🏷Date/Time/Timestamp]({{< relref "20220326063706.md" >}})


## Overview {#3b8782}

Clojureにおける時間の扱いについてまとめ.

ClojureはJavaの仕組みを利用しているので[📝Java Date/Time/Timestamp]({{< relref "20220816064530.md" >}})の知識があるとよい.

Clojureはたんなるラッパーなので困ったときにもJavaと一緒に検索で探すといい. 最悪Javaを呼び出せばなんとかなる.


## clojure.instant {#814ae7}

文字列を読み取る関数がいくつか定義されている.

<https://clojuredocs.org/clojure.instant>

-   parse-timestamp: RFC3339-likeフォーマットのparse.
-   read-instant-xxx


## clj-time {#804f0a}

<https://github.com/clj-time/clj-time>

おそらくデファクトスタンダードなClojure のライブラリ.

バックエンドのJoda Time Javaライブラリのラッパー.

しかし注意書きとして Java8以降はJava Timeをラップしている [clojure.java-time](#6f76660f-c632-4464-8e1d-fded6e0a94ad) を使ったほうがいいとのこと.

JavaではJava8よりJava Timeというパッケージが標準で使えるようになり, それ以前に使われていた Joda Timeを置き換えるようになった.

そのためclojureの方針としてもJoda TimeではなくJava Timeをつかうのがいい.


## clojure.java-time {#6f76660f-c632-4464-8e1d-fded6e0a94ad}

A Clojure wrapper for Java 8 Date-Time API.

<https://github.com/dm3/clojure.java-time>


## Java Libraries Interop {#be7699}

Javaの関数を呼び出してもいい.

SimpleDataFormatを使う例.

```clojure
(import '[java.text SimpleDateFormat])

(def twitter-timestamp "Sat Mar 12 20:34:57 +0000 2022")
(def twitter-format "EEE MMM dd HH:mm:ss Z yyyy")

(def locale java.util.Locale/US)
(def sdf (SimpleDateFormat. twitter-format locale))

(.setTimeZone sdf (java.util.TimeZone/getTimeZone "Asia/Tokyo"))
(.parse sdf twitter-timestamp)
```

ref: [📝Clojure Java Interop]({{< relref "20220117172324.md" >}})


## ✅Clojure Date/Time Tips {#0c385c}


### 現在時刻を取得する {#350f18}


## 🔗References {#3b90d2}

-   [clojureで日付/時刻を扱うライブラリを比較してみる | 10nin.com](https://www.10nin.com/clojure/datetime/library/2021/02/24/clj-time.html)
